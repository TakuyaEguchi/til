# 9.ファイルの操作

## ファイル全体を処理する関数

| 関数                                 | 説明                           |
| ------------------------------------ | ------------------------------ |
| file_get_contents(ファイル名)        | ファイルの内容をすべて読み込む |
| file_put_contents(ファイル名,文字列) | 文字列をファイルに書き込む     |

## ファイルの部分的な読み込み

1. ファイルへの接続をオープンする
2. ファイルに対して読み書きを行う
3. ファイルをクローズする

```PHP:sample04.php
<?php

// 1.ファイルへの接続をオープンする：先頭読み込み上書きなし
$file = fopen('food.txt', 'rb');

// 2.ファイルに対して読み込みを行う
for($line = fgets($file); !feof($file); $line = fgets($file)){
    $line = trim($line);
    echo "<h1>" . $line . "</h1>";
}

// 3.ファイルをクローズする
fclose($file);

```

## fopen()関数のファイルモード

| モード | ファイルに対する操作 | ファイルポインタの位置 | 上書き |
| ------ | -------------------- | ---------------------- | ------ |
| rb     | 読み込み             | 先頭                   | しない |
| wb     | 書き出し             | 先頭                   | する   |
| ab     | 書き出し             | 末尾                   | しない |
| xb     | 書き出し             | 先頭                   | しない |

## csvファイルの取り扱い

- CSVファイルの行を読み込むためにはfgetcsv()関数
- WebクライアントにCSVファイルが送られていることを津アエルにはheader()関数

## パーミッション

| 関数          | 操作                                       |
| ------------- | ------------------------------------------ |
| is_readable() | 読み込み可能か判定                         |
| is_writable() | 書き込み可能か判定                         |
| file_exists() | ファイルやディレクトリが存在しているか判定 |

## ファイルのエラー処理

```PHP:sample05.php
<?php

$file=file_get_contents('error.txt');

// !$fileの場合、0が判定できない
if($file === false){
    echo 'Coluld not read this file';
}
```

